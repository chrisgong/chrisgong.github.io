<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Shell," />





  <link rel="alternate" href="/atom.xml" title="Gc's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Free Online IDE and Terminal
“#!”“#!” 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。echo命令用于向窗口输出文本。
echoecho是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。命令格式：
sh-3.2$ echo &quot;Hello World&quot;Hello World
显示转义字符
sh-3.2$ echo &quot;\">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell脚本">
<meta property="og:url" content="http://gcblog.cn/2015/11/21/Shell脚本/index.html">
<meta property="og:site_name" content="Gc's blog">
<meta property="og:description" content="Free Online IDE and Terminal
“#!”“#!” 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。echo命令用于向窗口输出文本。
echoecho是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。命令格式：
sh-3.2$ echo &quot;Hello World&quot;Hello World
显示转义字符
sh-3.2$ echo &quot;\">
<meta property="og:updated_time" content="2015-11-21T07:54:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shell脚本">
<meta name="twitter:description" content="Free Online IDE and Terminal
“#!”“#!” 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。echo命令用于向窗口输出文本。
echoecho是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。命令格式：
sh-3.2$ echo &quot;Hello World&quot;Hello World
显示转义字符
sh-3.2$ echo &quot;\">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> Shell脚本 | Gc's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Gc's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Discontent is the first step in progress.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'PYs42SgQqvuLRSDRespH','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Shell脚本
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-21T13:48:58+08:00" content="2015-11-21">
              2015-11-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/21/Shell脚本/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/21/Shell脚本/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><p><a href="http://www.tutorialspoint.com/codingground.htm" target="_blank" rel="external">Free Online IDE and Terminal</a></p>
<h4 id="“#!”">“#!”</h4><p>“#!” 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。echo命令用于向窗口输出文本。</p>
<h4 id="echo">echo</h4><p>echo是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。命令格式：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">echo</span> <span class="string">"Hello World"</span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>
<p>显示转义字符</p>
<figure class="highlight smalltalk"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span><span class="char">$ </span>echo <span class="comment">"\"</span><span class="class">It</span> is a test\<span class="comment">""</span></span><br><span class="line"><span class="comment">"It is a test"</span></span><br></pre></td></tr></table></figure>
<p>如果变量与其它字符相连的话，需要使用大括号（{ }）：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ mouth=<span class="number">8</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"$&#123;mouth&#125;-1-2009"</span></span><br><span class="line"><span class="number">8</span>-<span class="number">1</span>-<span class="number">2009</span></span><br></pre></td></tr></table></figure>
<p>显示结果重定向至文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"It is a test"</span> &gt; myfile</span><br></pre></td></tr></table></figure>
<p>原样输出字符串<br>若需要原样输出字符串（不进行转义），请使用单引号。例如：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">'$name\"'</span></span><br><span class="line"><span class="variable">$name</span>\<span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>显示命令执行结果</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ echo `date`</span><br><span class="line"><span class="number">2015</span>年<span class="number">11</span>月<span class="number">21</span>日 星期六 <span class="number">15</span>时<span class="number">12</span>分<span class="number">06</span>秒 CST</span><br></pre></td></tr></table></figure>
<h4 id="read">read</h4><p>使用 read 命令从 stdin 获取输入并赋值给 PERSON 变量，最后在 stdout 上输出：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"What is your name?"</span></span><br><span class="line"><span class="built_in">read</span> PERSON</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Hello, <span class="variable">$PERSON</span>"</span></span><br></pre></td></tr></table></figure>
<h4 id="定义变量">定义变量</h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="setting">variableName=<span class="value"><span class="string">"value"</span></span></span></span><br></pre></td></tr></table></figure>
<p>注意，变量名和等号之间不能有空格，这可能和你熟悉的所有编程语言都不一样。同时，变量名的命名须遵循如下规则：</p>
<ul>
<li>首个字符必须为字母（a-z，A-Z）。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<p>变量定义举例：</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="setting">myUrl=<span class="value"><span class="string">"http://gcblog.cn"</span></span></span></span><br><span class="line"><span class="setting">myNum=<span class="value"><span class="number">100</span></span></span></span><br></pre></td></tr></table></figure>
<h4 id="使用变量">使用变量</h4><p>使用一个定义过的变量，只要在变量名前面加美元符号（$）即可，如：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ your_name=<span class="string">"gc"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="variable">$your</span>_name</span><br><span class="line">gc</span><br><span class="line">sh-<span class="number">3.2</span>$ echo $&#123;your_name&#125;</span><br><span class="line">gc</span><br></pre></td></tr></table></figure>
<p>变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界，比如下面这种情况：</p>
<figure class="highlight dos"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3</span>.<span class="number">2</span>$ <span class="flow">for</span> skill <span class="flow">in</span> Ada Coffe Action Java</span><br><span class="line">&gt; <span class="flow">do</span></span><br><span class="line">&gt; <span class="keyword">echo</span> "I am good <span class="built_in">at</span> $&#123;skill&#125; Script"</span><br><span class="line">&gt; done</span><br><span class="line">I am good <span class="built_in">at</span> Ada Script</span><br><span class="line">I am good <span class="built_in">at</span> Coffe Script</span><br><span class="line">I am good <span class="built_in">at</span> Action Script</span><br><span class="line">I am good <span class="built_in">at</span> Java Script</span><br></pre></td></tr></table></figure>
<h4 id="重新定义变量">重新定义变量</h4><p>已定义的变量，可以被重新定义，如：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sh</span>-3.2$ myUrl=<span class="string">"http://gcblog.cn"</span></span><br><span class="line"><span class="keyword">sh</span>-3.2$ echo <span class="label">$&#123;myUrl&#125;</span></span><br><span class="line">http:<span class="comment">//gcblog.cn</span></span><br><span class="line"><span class="keyword">sh</span>-3.2$ myUrl=<span class="string">"http://www.gcblog.cn"</span></span><br><span class="line"><span class="keyword">sh</span>-3.2$ echo <span class="label">$&#123;myUrl&#125;</span></span><br><span class="line">http:<span class="comment">//www.gcblog.cn</span></span><br></pre></td></tr></table></figure>
<h4 id="只读变量">只读变量</h4><p>使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<p>下面的例子尝试更改只读变量，结果报错：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sh</span>-3.2$ myUrl=<span class="string">"http://gcblog.cn"</span></span><br><span class="line"><span class="keyword">sh</span>-3.2$ readonly myUrl</span><br><span class="line"><span class="keyword">sh</span>-3.2$ myUrl=<span class="string">"http://www.gcblog.cn"</span></span><br><span class="line"><span class="keyword">sh</span>: myUrl: readonly variable</span><br></pre></td></tr></table></figure>
<h4 id="删除变量">删除变量</h4><p>使用 unset 命令可以删除变量。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">unset</span> variable_name</span><br></pre></td></tr></table></figure>
<p>变量被删除后不能再次使用；unset 命令不能删除只读变量。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ <span class="built_in">unset</span> myUrl</span><br><span class="line">sh: <span class="built_in">unset</span>: myUrl: cannot <span class="built_in">unset</span>: <span class="built_in">readonly</span> variable</span><br></pre></td></tr></table></figure>
<h4 id="变量类型">变量类型</h4><p>运行shell时，会同时存在三种变量：</p>
<ol>
<li><p>局部变量<br>局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p>
</li>
<li><p>环境变量<br>所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p>
</li>
<li><p>shell变量<br>shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p>
</li>
</ol>
<h4 id="特殊变量">特殊变量</h4><table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>当前脚本的文件名</td>
</tr>
<tr>
<td>$n</td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。</td>
</tr>
<tr>
<td>$#</td>
<td>传递给脚本或函数的参数个数。</td>
</tr>
<tr>
<td>$*</td>
<td>传递给脚本或函数的所有参数。</td>
</tr>
<tr>
<td>$@</td>
<td>传递给脚本或函数的所有参数。被双引号(“ “)包含时，与 $* 稍有不同，下面将会讲到。</td>
</tr>
<tr>
<td>$?</td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr>
<td>$$</td>
<td>当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。</td>
</tr>
</tbody>
</table>
<h4 id="命令行参数">命令行参数</h4><p>运行脚本时传递给脚本的参数称为命令行参数。命令行参数用 $n 表示，例如，$1 表示第一个参数，$2 表示第二个参数，依次类推。</p>
<p>请看下面的脚本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"File Name: <span class="variable">$0</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"First Parameter : <span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"First Parameter : <span class="variable">$2</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Quoted Values: <span class="variable">$@</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Quoted Values: $*"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Total Number of Parameters : <span class="variable">$#</span>"</span></span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">$./test.sh Zara Ali</span><br><span class="line">File <span class="string">Name :</span> ./test.sh</span><br><span class="line">First <span class="string">Parameter :</span> Zara</span><br><span class="line">Second <span class="string">Parameter :</span> Ali</span><br><span class="line">Quoted <span class="string">Values:</span> Zara Ali</span><br><span class="line">Quoted <span class="string">Values:</span> Zara Ali</span><br><span class="line">Total Number of <span class="string">Parameters :</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h4 id="$*_和_$@_的区别">$* 和 $@ 的区别</h4><p>$* 和 $@ 都表示传递给函数或脚本的所有参数，不被双引号(“ “)包含时，都以”$1” “$2” … “$n” 的形式输出所有参数。</p>
<p>但是当它们被双引号(“ “)包含时，”$*” 会将所有的参数作为一个整体，以”$1 $2 … $n”的形式输出所有参数；”$@” 会将各个参数分开，以”$1” “$2” … “$n” 的形式输出所有参数。</p>
<p>下面的例子可以清楚的看到 $* 和 $@ 的区别：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$*="</span> $*</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\"\$*\"="</span> <span class="string">"$*"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$@="</span> <span class="variable">$@</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\"\$@\"="</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"print each param from \$*"</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> $*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"print each param from \$@"</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"print each param from \"\$*\""</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="string">"$*"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"print each param from \"\$@\""</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$var</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>执行 ./test.sh “a” “b” “c” “d”，看到下面的结果：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">$*=  <span class="operator">a</span> b c d</span><br><span class="line"><span class="string">"$*"</span>= <span class="operator">a</span> b c d</span><br><span class="line">$@=  <span class="operator">a</span> b c d</span><br><span class="line"><span class="string">"$@"</span>= <span class="operator">a</span> b c d</span><br><span class="line">print <span class="keyword">each</span> <span class="built_in">param</span> <span class="built_in">from</span> $*</span><br><span class="line"><span class="operator">a</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">print <span class="keyword">each</span> <span class="built_in">param</span> <span class="built_in">from</span> $@</span><br><span class="line"><span class="operator">a</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">print <span class="keyword">each</span> <span class="built_in">param</span> <span class="built_in">from</span> <span class="string">"$*"</span></span><br><span class="line"><span class="operator">a</span> b c d</span><br><span class="line">print <span class="keyword">each</span> <span class="built_in">param</span> <span class="built_in">from</span> <span class="string">"$@"</span></span><br><span class="line"><span class="operator">a</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure>
<h4 id="退出状态">退出状态</h4><p>$? 可以获取上一个命令的退出状态。所谓退出状态，就是上一个命令执行后的返回结果。</p>
<p>退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1。</p>
<p>不过，也有一些命令返回其他值，表示不同类型的错误。</p>
<p>下面例子中，命令成功执行：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">$./<span class="keyword">test</span>.<span class="keyword">sh</span> Zara Ali</span><br><span class="line"><span class="keyword">File</span> Name : ./<span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">First Parameter : Zara</span><br><span class="line">Second Parameter : Ali</span><br><span class="line">Quoted Values: Zara Ali</span><br><span class="line">Quoted Values: Zara Ali</span><br><span class="line"><span class="keyword">Total</span> Number of Parameters : 2</span><br><span class="line"><span class="label">$echo</span> $?</span><br><span class="line">0</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h4 id="转义字符">转义字符</h4><p>如果表达式中包含特殊字符，Shell 将会进行替换。例如，在双引号中使用变量就是一种替换，转义字符也是一种替换。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="number">10</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo -e <span class="string">"Value of a is $a \n"</span></span><br><span class="line">-e Value of a is <span class="number">10</span></span><br><span class="line"></span><br><span class="line">sh-<span class="number">3.2</span>$</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>反斜杠</td>
</tr>
<tr>
<td>\a</td>
<td>警报，响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格（删除键）</td>
</tr>
<tr>
<td>\f</td>
<td>换页(FF)，将当前位置移到下页开头</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\t</td>
<td>水平制表符（tab键）</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符</td>
</tr>
</tbody>
</table>
<p>可以使用 echo 命令的 -E 选项禁止转义，默认也是不转义的；使用 -n 选项可以禁止插入换行符。</p>
<h4 id="命令替换">命令替换</h4><p>命令替换是指Shell可以先执行命令，将输出结果暂时保存，在适当的地方输出。</p>
<p>命令替换的语法：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">`<span class="command"><span class="keyword">command</span>`</span></span><br></pre></td></tr></table></figure>
<p>注意是反引号，不是单引号，这个键位于 Esc 键下方。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ DATE=`date`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"Date is $DATE"</span></span><br><span class="line">Date is <span class="number">2015</span>年<span class="number">11</span>月<span class="number">21</span>日 星期六 <span class="number">14</span>时<span class="number">30</span>分<span class="number">39</span>秒 CST</span><br><span class="line">sh-<span class="number">3.2</span>$ USERS=`who | wc -l`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"Logged in user are $USERS"</span></span><br><span class="line">Logged in user are        <span class="number">3</span></span><br><span class="line">sh-<span class="number">3.2</span>$ UP=`date ; uptime`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"Uptime is $UP"</span></span><br><span class="line">Uptime is <span class="number">2015</span>年<span class="number">11</span>月<span class="number">21</span>日 星期六 <span class="number">14</span>时<span class="number">31</span>分<span class="number">30</span>秒 CST</span><br><span class="line"><span class="number">14</span>:<span class="number">31</span>  up <span class="number">17</span> days,  <span class="number">5</span>:<span class="number">14</span>, <span class="number">3</span> users, load averages: <span class="number">2.64</span> <span class="number">2.92</span> <span class="number">2.24</span></span><br></pre></td></tr></table></figure>
<h4 id="变量替换">变量替换</h4><p>变量替换可以根据变量的状态（是否为空、是否定义等）来改变它的值</p>
<p>可以使用的变量替换形式：</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>${var}</td>
<td>变量本来的值</td>
</tr>
<tr>
<td>${var:-word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。</td>
</tr>
<tr>
<td>${var:=word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。</td>
</tr>
<tr>
<td>${var:?message}</td>
<td>如果变量 var 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，可以用来检测变量 var 是否可以被正常赋值。若此替换出现在Shell脚本中，那么脚本将停止运行。</td>
</tr>
<tr>
<td>${var:+word}</td>
<td>如果变量 var 被定义，那么返回 word，但不改变 var 的值。</td>
</tr>
</tbody>
</table>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ echo $&#123;<span class="variable"><span class="keyword">var</span></span>:-<span class="string">"Variable is not set"</span>&#125;</span><br><span class="line">Variable <span class="keyword">is</span> not <span class="keyword">set</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"1 - Value of var is $&#123;var&#125;"</span></span><br><span class="line"><span class="number">1</span> - Value of <span class="variable"><span class="keyword">var</span> is</span><br><span class="line">sh-3.2</span>$ echo $&#123;<span class="variable"><span class="keyword">var</span></span>:=<span class="string">"Variable is not set"</span>&#125;</span><br><span class="line">Variable <span class="keyword">is</span> not <span class="keyword">set</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"2 - Value of var is $&#123;var&#125;"</span></span><br><span class="line"><span class="number">2</span> - Value of <span class="variable"><span class="keyword">var</span> is Variable is not set</span><br><span class="line">sh-3.2</span>$ unset <span class="variable"><span class="keyword">var</span></span><br><span class="line">sh-3.2</span>$ echo $&#123;<span class="variable"><span class="keyword">var</span></span>:+<span class="string">"This is default value"</span>&#125;</span><br><span class="line"></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"3 - Value of var is $var"</span></span><br><span class="line"><span class="number">3</span> - Value of <span class="variable"><span class="keyword">var</span> is</span><br><span class="line">sh-3.2</span>$ <span class="variable"><span class="keyword">var</span></span>=<span class="string">"Prefix"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo $&#123;<span class="variable"><span class="keyword">var</span></span>:+<span class="string">"This is default value"</span>&#125;</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">default</span> value</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"4 - Value of var is $var"</span></span><br><span class="line"><span class="number">4</span> - Value of <span class="variable"><span class="keyword">var</span> is Prefix</span><br><span class="line">sh-3.2</span>$ echo $&#123;<span class="variable"><span class="keyword">var</span></span>:?<span class="string">"Print this message"</span>&#125;</span><br><span class="line">Prefix</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"5 - Value of var is $&#123;var&#125;"</span></span><br><span class="line"><span class="number">5</span> - Value of <span class="variable"><span class="keyword">var</span> is Prefix</span></span><br></pre></td></tr></table></figure>
<h4 id="算术运算符">算术运算符</h4><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="number">10</span></span><br><span class="line">sh-<span class="number">3.2</span>$ b=<span class="number">20</span></span><br><span class="line">sh-<span class="number">3.2</span>$ val=`expr <span class="variable">$a</span> + <span class="variable">$b</span>`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"a + b : $val"</span></span><br><span class="line">a + b : <span class="number">30</span></span><br><span class="line">sh-<span class="number">3.2</span>$ val=`expr <span class="variable">$a</span> - <span class="variable">$b</span>`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"a - b : $val"</span></span><br><span class="line">a - b : -<span class="number">10</span></span><br><span class="line">sh-<span class="number">3.2</span>$ val=`expr <span class="variable">$a</span> \* <span class="variable">$b</span>`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"a * b : $val"</span></span><br><span class="line">a * b : <span class="number">200</span></span><br><span class="line">sh-<span class="number">3.2</span>$ val=`expr <span class="variable">$b</span> / <span class="variable">$a</span>`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"b / a : $val"</span></span><br><span class="line">b / a : <span class="number">2</span></span><br><span class="line">sh-<span class="number">3.2</span>$ val=`expr <span class="variable">$b</span> % <span class="variable">$a</span>`</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"b % a : $val"</span></span><br><span class="line">b % a : <span class="number">0</span></span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"a is equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"a is not equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line">a is not equal <span class="keyword">to</span> b</span><br></pre></td></tr></table></figure>
<p>注意：<br>乘号(*)前边必须加反斜杠()才能实现乘法运算；</p>
<p>if…then…fi 是条件语句</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加法</td>
</tr>
<tr>
<td>-</td>
<td>减法</td>
</tr>
<tr>
<td>*</td>
<td>乘法</td>
</tr>
<tr>
<td>/</td>
<td>除法</td>
</tr>
<tr>
<td>%</td>
<td>取余</td>
</tr>
<tr>
<td>=</td>
<td>赋值</td>
</tr>
<tr>
<td>==</td>
<td>相等。用于比较两个数字，相同则返回 true。</td>
</tr>
<tr>
<td>!=</td>
<td>不相等。用于比较两个数字，不相同则返回 true。</td>
</tr>
</tbody>
</table>
<p>注意：条件表达式要放在方括号之间，并且要有空格，例如 [$a==$b] 是错误的，必须写成 [ $a == $b ]。</p>
<h4 id="关系运算符">关系运算符</h4><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="number">10</span></span><br><span class="line">sh-<span class="number">3.2</span>$ b=<span class="number">20</span></span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -eq $b : a is equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -eq $b: a is not equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -eq <span class="number">20</span>: a is not equal <span class="keyword">to</span> b</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -ne <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -ne $b: a is not equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -ne $b : a is equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -ne <span class="number">20</span>: a is not equal <span class="keyword">to</span> b</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -gt $b: a is greater than b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -gt $b: a is not greater than b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -gt <span class="number">20</span>: a is not greater than b</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -lt <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -lt $b: a is less than b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -lt $b: a is not less than b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -lt <span class="number">20</span>: a is less than b</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -ge <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -ge $b: a is greater or  equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -ge $b: a is not greater or equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -ge <span class="number">20</span>: a is not greater or equal <span class="keyword">to</span> b</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> -le <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a -le $b: a is less or  equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a -le $b: a is not less or equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line"><span class="number">10</span> -le <span class="number">20</span>: a is less or  equal <span class="keyword">to</span> b</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-eq</td>
<td>检测两个数是否相等，相等返回 true。</td>
</tr>
<tr>
<td>-ne</td>
<td>检测两个数是否相等，不相等返回 true。</td>
</tr>
<tr>
<td>-gt</td>
<td>检测左边的数是否大于右边的，如果是，则返回 true。</td>
</tr>
<tr>
<td>-lt</td>
<td>检测左边的数是否小于右边的，如果是，则返回 true。</td>
</tr>
<tr>
<td>-ge</td>
<td>检测左边的数是否大等于右边的，如果是，则返回 true。</td>
</tr>
<tr>
<td>-le</td>
<td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="布尔运算符">布尔运算符</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="number">10</span></span><br><span class="line">sh-<span class="number">3.2</span>$ b=<span class="number">20</span></span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> != <span class="variable">$b</span> : a is not equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> != <span class="variable">$b</span>: a is equal to b"</span></span><br><span class="line">&gt; <span class="keyword">fi</span></span><br><span class="line"><span class="number">10</span> != <span class="number">20</span> : a is not equal to b</span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> <span class="operator">-lt</span> <span class="number">100</span> <span class="operator">-a</span> <span class="variable">$b</span> <span class="operator">-gt</span> <span class="number">15</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -gt 15 : returns true"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -gt 15 : returns false"</span></span><br><span class="line">&gt; <span class="keyword">fi</span></span><br><span class="line"><span class="number">10</span> <span class="operator">-lt</span> <span class="number">100</span> <span class="operator">-a</span> <span class="number">20</span> <span class="operator">-gt</span> <span class="number">15</span> : returns <span class="literal">true</span></span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> <span class="operator">-lt</span> <span class="number">100</span> -o <span class="variable">$b</span> <span class="operator">-gt</span> <span class="number">100</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 : returns true"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 : returns false"</span></span><br><span class="line">&gt; <span class="keyword">fi</span></span><br><span class="line"><span class="number">10</span> <span class="operator">-lt</span> <span class="number">100</span> -o <span class="number">20</span> <span class="operator">-gt</span> <span class="number">100</span> : returns <span class="literal">true</span></span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> <span class="operator">-lt</span> <span class="number">5</span> -o <span class="variable">$b</span> <span class="operator">-gt</span> <span class="number">100</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 : returns true"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 : returns false"</span></span><br><span class="line">&gt; <span class="keyword">fi</span></span><br><span class="line"><span class="number">10</span> <span class="operator">-lt</span> <span class="number">100</span> -o <span class="number">20</span> <span class="operator">-gt</span> <span class="number">100</span> : returns <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>!</td>
<td>非运算，表达式为 true 则返回 false，否则返回 true。</td>
</tr>
<tr>
<td>-o</td>
<td>或运算，有一个表达式为 true 则返回 true。</td>
</tr>
<tr>
<td>-a</td>
<td>与运算，两个表达式都为 true 才返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="字符串运算符">字符串运算符</h4><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="string">"abc"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ b=<span class="string">"efg"</span></span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> = <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a = $b : a is equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a = $b: a is not equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line">abc = efg: a is not equal <span class="keyword">to</span> b</span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a != $b : a is not equal to b"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a != $b: a is equal to b"</span></span><br><span class="line">&gt; fi</span><br><span class="line">abc != efg : a is not equal <span class="keyword">to</span> b</span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -z <span class="variable">$a</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"-z $a : string length is zero"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"-z $a : string length is not zero"</span></span><br><span class="line">&gt; fi</span><br><span class="line">-z abc : string length is not zero</span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -n <span class="variable">$a</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"-n $a : string length is not zero"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"-n $a : string length is zero"</span></span><br><span class="line">&gt; fi</span><br><span class="line">-n abc : string length is not zero</span><br><span class="line">sh-<span class="number">3.2</span>$</span><br><span class="line">sh-<span class="number">3.2</span>$ <span class="keyword">if</span> [ <span class="variable">$a</span> ]</span><br><span class="line">&gt; <span class="keyword">then</span></span><br><span class="line">&gt;    echo <span class="string">"$a : string is not empty"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    echo <span class="string">"$a : string is empty"</span></span><br><span class="line">&gt; fi</span><br><span class="line">abc : string is not <span class="keyword">empty</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>检测两个字符串是否相等，相等返回 true。</td>
</tr>
<tr>
<td>!=</td>
<td>检测两个字符串是否相等，不相等返回 true。</td>
</tr>
<tr>
<td>-z</td>
<td>检测字符串长度是否为0，为0返回 true。</td>
</tr>
<tr>
<td>-n</td>
<td>检测字符串长度是否为0，为0返回 true。</td>
</tr>
<tr>
<td>str</td>
<td>检测字符串是否为空，不为空返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="文件测试运算符">文件测试运算符</h4><p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">file</span>=<span class="string">"~/Documents/重构.md"</span></span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">r</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File has read access"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File does not have read access"</span></span><br><span class="line">&gt; fi</span><br><span class="line">File does not have <span class="keyword">read</span> access</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">w</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File has write permission"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File does not have write permission"</span></span><br><span class="line">&gt; fi</span><br><span class="line">File does not have <span class="keyword">write</span> permission</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">x</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File has execute permission"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File does not have execute permission"</span></span><br><span class="line">&gt; fi</span><br><span class="line">File does not have <span class="keyword">execute</span> permission</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">f</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File is an ordinary file"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"This is sepcial file"</span></span><br><span class="line">&gt; fi</span><br><span class="line">This <span class="keyword">is</span> sepcial <span class="keyword">file</span></span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">d</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File is a directory"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"This is not a directory"</span></span><br><span class="line">&gt; fi</span><br><span class="line">This <span class="keyword">is</span> not <span class="keyword">a</span> directory</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">s</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File size is zero"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File size is not zero"</span></span><br><span class="line">&gt; fi</span><br><span class="line">File size <span class="keyword">is</span> not zero</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$</span><br><span class="line"><span class="keyword">sh</span>-<span class="number">3.2</span>$ <span class="keyword">if</span> [ -<span class="keyword">e</span> $<span class="keyword">file</span> ]</span><br><span class="line">&gt; then</span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File exists"</span></span><br><span class="line">&gt; <span class="keyword">else</span></span><br><span class="line">&gt;    <span class="keyword">echo</span> <span class="string">"File does not exist"</span></span><br><span class="line">&gt; fi</span><br><span class="line">File does not exist</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b file</td>
<td>检测文件是否是块设备文件，如果是，则返回 true。</td>
</tr>
<tr>
<td>-c file</td>
<td>检测文件是否是字符设备文件，如果是，则返回 true。</td>
</tr>
<tr>
<td>-d file</td>
<td>检测文件是否是目录，如果是，则返回 true。</td>
</tr>
<tr>
<td>-f file</td>
<td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
</tr>
<tr>
<td>-g file</td>
<td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
</tr>
<tr>
<td>-k file</td>
<td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
</tr>
<tr>
<td>-p file</td>
<td>检测文件是否是具名管道，如果是，则返回 true。</td>
</tr>
<tr>
<td>-u file</td>
<td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
</tr>
<tr>
<td>-r file</td>
<td>检测文件是否可读，如果是，则返回 true。</td>
</tr>
<tr>
<td>-w file</td>
<td>检测文件是否可写，如果是，则返回 true。</td>
</tr>
<tr>
<td>-x file</td>
<td>检测文件是否可执行，如果是，则返回 true。</td>
</tr>
<tr>
<td>-s file</td>
<td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
</tr>
<tr>
<td>-e file</td>
<td>检测文件（包括目录）是否存在，如果是，则返回 true。</td>
</tr>
</tbody>
</table>
<h4 id="Shell注释">Shell注释</h4><p>以“#”开头的行就是注释，会被解释器忽略。</p>
<p>sh里没有多行注释，只能每一行加一个#号。只能像这样：</p>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#--------------------------------------------</span></span><br><span class="line"><span class="preprocessor"># 这是一个自动打ipa的脚本，基于webfrogs的ipa-build书写：</span></span><br><span class="line"><span class="preprocessor"># https://github.com/webfrogs/xcode_shell/blob/master/ipa-build</span></span><br><span class="line"><span class="preprocessor"># 功能：自动为etao ios app打包，产出物为14个渠道的ipa包</span></span><br><span class="line"><span class="preprocessor"># 特色：全自动打包，不需要输入任何参数</span></span><br><span class="line"><span class="preprocessor">#--------------------------------------------</span></span><br><span class="line"><span class="preprocessor">##### 用户配置区 开始 #####</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor"># 项目根目录，推荐将此脚本放在项目的根目录，这里就不用改了</span></span><br><span class="line"><span class="preprocessor"># 应用名，确保和Xcode里Product下的target_name.app名字一致</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">##### 用户配置区 结束  #####</span></span><br></pre></td></tr></table></figure>
<p>如果在开发过程中，遇到大段的代码需要临时注释起来，过一会儿又取消注释，怎么办呢？每一行加个#符号太费力了，可以把这一段要注释的代码用一对花括号括起来，定义成一个函数，没有地方调用这个函数，这块代码就不会执行，达到了和注释一样的效果。</p>
<h4 id="Shell字符串">Shell字符串</h4><p>字符串是shell编程中最常用最有用的数据类型（除了数字和字符串，也没啥其它类型好用了），字符串可以用单引号，也可以用双引号，也可以不用引号。单双引号的区别跟PHP类似。</p>
<p><strong>单引号</strong></p>
<figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line">str=<span class="attribute">'this</span> <span class="keyword">is</span> a <span class="typename">string</span>'</span><br></pre></td></tr></table></figure>
<p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</li>
<li>单引号字串中不能出现单引号（对单引号使用转义符后也不行）。</li>
</ul>
<p><strong>双引号</strong></p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">your_name=<span class="string">'qinjx'</span></span><br><span class="line">str=<span class="string">"Hello, I know your are \"</span><span class="variable">$your</span>_name\<span class="string">"! \n"</span></span><br></pre></td></tr></table></figure>
<p>双引号的优点：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<p><strong>拼接字符串</strong></p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">your_name=<span class="string">"qinjx"</span></span><br><span class="line">greeting=<span class="string">"hello, "</span><span class="variable">$your</span>_name<span class="string">" !"</span></span><br><span class="line">greeting_1=<span class="string">"hello, $&#123;your_name&#125; !"</span></span><br><span class="line"></span><br><span class="line">echo <span class="variable">$greeting</span> <span class="variable">$greeting</span>_1</span><br></pre></td></tr></table></figure>
<p><strong>获取字符串长度</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">string=<span class="string">"abcd"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#string&#125;</span> <span class="comment">#输出 4</span></span><br></pre></td></tr></table></figure>
<p><strong>提取子字符串</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>=<span class="string">"alibaba is a great company"</span></span><br><span class="line">echo $&#123;<span class="built_in">string</span>:<span class="number">1</span>:<span class="number">4</span>&#125; <span class="preprocessor">#输出liba</span></span><br></pre></td></tr></table></figure>
<p><strong>查找子字符串</strong></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>=<span class="string">"alibaba is a great company"</span></span><br><span class="line"><span class="keyword">echo</span> `expr <span class="built_in">index</span> <span class="string">"$string"</span> <span class="keyword">is</span>`</span><br></pre></td></tr></table></figure>
<h4 id="定义数组">定义数组</h4><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。类似与C语言，数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。<br>在Shell中，用括号来表示数组，数组元素用“空格”符号分割开。定义数组的一般形式为：<br>    array_name=(value1 … valuen)</p>
<figure class="highlight ceylon"><table><tr><td class="code"><pre><span class="line">array<span class="number">_n</span>ame=(<span class="keyword">value</span><span class="number">0</span> <span class="keyword">value</span><span class="number">1</span> <span class="keyword">value</span><span class="number">2</span> <span class="keyword">value</span><span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight ceylon"><table><tr><td class="code"><pre><span class="line">array<span class="number">_n</span>ame=(</span><br><span class="line"><span class="keyword">value</span><span class="number">0</span></span><br><span class="line"><span class="keyword">value</span><span class="number">1</span></span><br><span class="line"><span class="keyword">value</span><span class="number">2</span></span><br><span class="line"><span class="keyword">value</span><span class="number">3</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>还可以单独定义数组的各个分量：</p>
<figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line">array_name<span class="string">[0]</span>=value0</span><br><span class="line">array_name<span class="string">[1]</span>=value1</span><br><span class="line">array_name<span class="string">[2]</span>=value2</span><br></pre></td></tr></table></figure>
<p>可以不使用连续的下标，而且下标的范围没有限制。</p>
<h4 id="读取数组">读取数组</h4><p>读取数组元素值的一般格式是：<br>    ${array_name[index]}</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="setting">valuen=<span class="value"><span class="variable">$&#123;array_name[2]&#125;</span></span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ NAME[<span class="number">0</span>]=<span class="string">"Zara"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ NAME[<span class="number">1</span>]=<span class="string">"Qadir"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ NAME[<span class="number">2</span>]=<span class="string">"Mahnaz"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ NAME[<span class="number">3</span>]=<span class="string">"Ayan"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ NAME[<span class="number">4</span>]=<span class="string">"Daisy"</span></span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"First Index: $&#123;NAME[0]&#125;"</span></span><br><span class="line">First Index: Zara</span><br><span class="line">sh-<span class="number">3.2</span>$ echo <span class="string">"Second Index: $&#123;NAME[1]&#125;"</span></span><br><span class="line">Second Index: Qadir</span><br></pre></td></tr></table></figure>
<h4 id="获取数组的长度">获取数组的长度</h4><p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 取得数组元素的个数</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[@]&#125;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[*]&#125;</span></span><br><span class="line"><span class="comment"># 取得数组单个元素的长度</span></span><br><span class="line">lengthn=<span class="variable">$&#123;</span><span class="comment">#array_name[n]&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="printf命令">printf命令</h4><p>printf 命令用于格式化输出， 是echo命令的增强版。它是C语言printf()库函数的一个有限的变形，并且在语法上有些不同。</p>
<p>注意：printf 由 POSIX 标准所定义，移植性要比 echo 好。</p>
<p>如同 echo 命令，printf 命令也可以输出简单的字符串：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$printf</span> <span class="string">"Hello, Shell\n"</span></span><br><span class="line">Hello, Shell</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>printf 不像 echo 那样会自动换行，必须显式添加换行符(\n)。</p>
<p>printf 命令的语法：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>  format-<span class="built_in">string</span>  [arguments...]</span><br></pre></td></tr></table></figure>
<p>format-string 为格式控制字符串，arguments 为参数列表。</p>
<figure class="highlight perl"><table><tr><td class="code"><pre><span class="line"><span class="comment"># format-string为双引号</span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">"<span class="variable">%d</span> <span class="variable">%s</span>\n"</span> <span class="number">1</span> <span class="string">"abc"</span></span><br><span class="line"><span class="number">1</span> abc</span><br><span class="line"><span class="comment"># 单引号与双引号效果一样 </span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">'%d %s\n'</span> <span class="number">1</span> <span class="string">"abc"</span> </span><br><span class="line"><span class="number">1</span> abc</span><br><span class="line"><span class="comment"># 没有引号也可以输出</span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="variable">%s</span> abcdef</span><br><span class="line">abcdef</span><br><span class="line"><span class="comment"># 格式只指定了一个参数，但多出的参数仍然会按照该格式输出，format-string 被重用</span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="variable">%s</span> abc def</span><br><span class="line">abcdef</span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">"<span class="variable">%s</span>\n"</span> abc def</span><br><span class="line">abc</span><br><span class="line">def</span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">"<span class="variable">%s</span> <span class="variable">%s</span> <span class="variable">%s</span>\n"</span> a b c d e f g h i j</span><br><span class="line">a b c</span><br><span class="line">d e f</span><br><span class="line">g h i</span><br><span class="line">j</span><br><span class="line"><span class="comment"># 如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">"<span class="variable">%s</span> and <span class="variable">%d</span> \n"</span> </span><br><span class="line"><span class="keyword">and</span> <span class="number">0</span></span><br><span class="line"><span class="comment"># 如果以 %d 的格式来显示字符串，那么会有警告，提示无效的数字，此时默认置为 0</span></span><br><span class="line">$ <span class="keyword">printf</span> <span class="string">"The first program always prints'<span class="variable">%s</span>,<span class="variable">%d</span>\n'"</span> Hello Shell</span><br><span class="line">-bash: <span class="keyword">printf</span>: Shell: invalid number</span><br><span class="line">The first program always prints <span class="string">'Hello,0'</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>注意，根据POSIX标准，浮点格式%e、%E、%f、%g与%G是“不需要被支持”。这是因为awk支持浮点预算，且有它自己的printf语句。这样Shell程序中需要将浮点数值进行格式化的打印时，可使用小型的awk程序实现。然而，内建于bash、ksh93和zsh中的printf命令都支持浮点格式。</p>
<h4 id="if_else语句">if else语句</h4><p>if 语句通过关系运算符判断表达式的真假来决定执行哪个分支。Shell 有三种 if … else 语句：</p>
<ol>
<li>if … else 语句</li>
</ol>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ expression ]	</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="keyword">is</span> <span class="constant">true</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>如果 expression 返回 true，then 后边的语句将会被执行；如果返回 false，不会执行任何语句。</p>
<p>最后必须以 fi 来结尾闭合 if，fi 就是 if 倒过来拼写，后面也会遇见。</p>
<p>注意：expression 和方括号([ ])之间必须有空格，否则会有语法错误。</p>
<ol>
<li>if … else … fi 语句</li>
</ol>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ expression ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="keyword">is</span> <span class="constant">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="keyword">is</span> <span class="keyword">not</span> <span class="constant">true</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>如果 expression 返回 true，那么 then 后边的语句将会被执行；否则，执行 else 后边的语句。</p>
<ol>
<li>if … elif … fi 语句</li>
</ol>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ expression <span class="number">1</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="number">1</span> <span class="keyword">is</span> <span class="literal">true</span></span><br><span class="line">elif [ expression <span class="number">2</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="number">2</span> <span class="keyword">is</span> <span class="literal">true</span></span><br><span class="line">elif [ expression <span class="number">3</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> expression <span class="number">3</span> <span class="keyword">is</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   Statement(s) <span class="keyword">to</span> be executed <span class="keyword">if</span> <span class="literal">no</span> expression <span class="keyword">is</span> <span class="literal">true</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>哪一个 expression 的值为 true，就执行哪个 expression 后面的语句；如果都为 false，那么不执行任何语句。</p>
<h4 id="case_esac语句">case esac语句</h4><p>case … esac 与其他语言中的 switch … case 语句类似，是一种多分枝选择结构。</p>
<p>case 语句匹配一个值或一个模式，如果匹配成功，执行相匹配的命令。case语句格式如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> 值 <span class="keyword">in</span></span><br><span class="line">模式<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">command</span>1</span><br><span class="line">    <span class="built_in">command</span>2</span><br><span class="line">    <span class="built_in">command</span>3</span><br><span class="line">    ;;</span><br><span class="line">模式<span class="number">2</span>）</span><br><span class="line">    <span class="built_in">command</span>1</span><br><span class="line">    <span class="built_in">command</span>2</span><br><span class="line">    <span class="built_in">command</span>3</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">command</span>1</span><br><span class="line">    <span class="built_in">command</span>2</span><br><span class="line">    <span class="built_in">command</span>3</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>case工作方式如上所示。取值后面必须为关键字 in，每一模式必须以右括号结束。取值可以为变量或常数。匹配发现取值符合某一模式后，其间所有命令开始执行直至 ;;。;; 与其他语言中的 break 类似，意思是跳到整个 case 语句的最后。</p>
<p>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。</p>
<h4 id="for循环">for循环</h4><p>for循环一般格式为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 列表</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span>1</span><br><span class="line">    <span class="built_in">command</span>2</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">command</span>N</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>列表是一组值（数字、字符串等）组成的序列，每个值通过空格分隔。每循环一次，就将列表中的下一个值赋给变量。</p>
<p>in 列表是可选的，如果不用它，for 循环使用命令行的位置参数。</p>
<h4 id="while循环">while循环</h4><p>while循环用于不断执行一系列命令，也用于从输入文件中读取数据；命令通常为测试条件。其格式为：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="command"><span class="keyword">command</span></span></span><br><span class="line"><span class="built_in">do</span></span><br><span class="line">   Statement(s) <span class="built_in">to</span> be executed <span class="keyword">if</span> <span class="command"><span class="keyword">command</span> <span class="title">is</span> <span class="title">true</span></span></span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>命令执行完毕，控制返回循环顶部，从头开始直至测试条件为假。</p>
<h4 id="until循环">until循环</h4><p>until 循环执行一系列命令直至条件为 true 时停止。until 循环与 while 循环在处理方式上刚好相反。一般while循环优于until循环，但在某些时候，也只是极少数情况下，until 循环更加有用。</p>
<p>until 循环格式为：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line"><span class="keyword">until</span> <span class="command"><span class="keyword">command</span></span></span><br><span class="line"><span class="built_in">do</span></span><br><span class="line">   Statement(s) <span class="built_in">to</span> be executed <span class="keyword">until</span> <span class="command"><span class="keyword">command</span> <span class="title">is</span> <span class="title">true</span></span></span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>command 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span>$ a=<span class="number">0</span></span><br><span class="line">sh-<span class="number">3.2</span>$ until [ ! $a -lt <span class="number">10</span> ]</span><br><span class="line">&gt; <span class="keyword">do</span></span><br><span class="line">&gt;    echo $a</span><br><span class="line">&gt;    a=`expr $a + <span class="number">1</span>`</span><br><span class="line">&gt; done</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<h4 id="break和continue命令">break和continue命令</h4><p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，像大多数编程语言一样，Shell也使用 break 和 continue 来跳出循环。</p>
<p><strong>break命令</strong><br>break命令允许跳出所有循环（终止执行后面的所有循环）。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"Input a number between 1 to 5: "</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">        <span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>) <span class="built_in">echo</span> <span class="string">"Your number is <span class="variable">$aNum</span>!"</span></span><br><span class="line">        ;;</span><br><span class="line">        *) <span class="built_in">echo</span> <span class="string">"You do not select a number between 1 to 5, game is over!"</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>在嵌套循环中，break 命令后面还可以跟一个整数，表示跳出第几层循环。例如：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">break</span> <span class="keyword">n</span></span><br></pre></td></tr></table></figure>
<p><strong>continue命令</strong><br>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"Input a number between 1 to 5: "</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">        <span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>) <span class="built_in">echo</span> <span class="string">"Your number is <span class="variable">$aNum</span>!"</span></span><br><span class="line">        ;;</span><br><span class="line">        *) <span class="built_in">echo</span> <span class="string">"You do not select a number between 1 to 5!"</span></span><br><span class="line">            <span class="built_in">continue</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"Game is over!"</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>同样，continue 后面也可以跟一个数字，表示跳出第几层循环。</p>
<h4 id="Shell函数返回值、删除函数、在终端调用函数">Shell函数返回值、删除函数、在终端调用函数</h4><p>函数可以让我们将一个复杂功能划分成若干模块，让程序结构更加清晰，代码重复利用率更高。像其他编程语言一样，Shell 也支持函数。Shell 函数必须先定义后使用。</p>
<p>Shell 函数的定义格式如下：</p>
<figure class="highlight ceylon"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span><span class="number">_n</span>ame () &#123;</span><br><span class="line">    list <span class="keyword">of</span> commands</span><br><span class="line">    [ <span class="keyword">return</span> <span class="keyword">value</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你愿意，也可以在函数名前加上关键字 function：</p>
<figure class="highlight ceylon"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="keyword">function</span><span class="number">_n</span>ame () &#123;</span><br><span class="line">    list <span class="keyword">of</span> commands</span><br><span class="line">    [ <span class="keyword">return</span> <span class="keyword">value</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数返回值，可以显式增加return语句；如果不加，会将最后一条命令运行结果作为返回值。</p>
<p>Shell 函数返回值只能是整数，一般用来表示函数执行成功与否，0表示成功，其他值表示失败。如果 return 其他数据，比如一个字符串，往往会得到错误提示：“numeric argument required”。</p>
<p>如果一定要让函数返回字符串，那么可以先定义一个变量，用来接收函数的计算结果，脚本在需要的时候访问这个变量来获得函数返回值。</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">sh-<span class="number">3.2</span><span class="variable">$ </span><span class="comment"># Define your function here</span></span><br><span class="line">sh-<span class="number">3.2</span><span class="variable">$ </span><span class="constant">Hello </span>() &#123;</span><br><span class="line">&gt;    echo <span class="string">"Url is http://see.xidian.edu.cn/cpp/shell/"</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">sh-<span class="number">3.2</span><span class="variable">$</span><br><span class="line"></span>sh-<span class="number">3.2</span><span class="variable">$ </span><span class="comment"># Invoke your function</span></span><br><span class="line">sh-<span class="number">3.2</span><span class="variable">$ </span><span class="constant">Hello</span></span><br><span class="line"><span class="constant">Url </span>is <span class="symbol">http:</span>/<span class="regexp">/see.xidian.edu.cn/cpp</span><span class="regexp">/shell/</span></span><br></pre></td></tr></table></figure>
<p>再来看一个带有return语句的函数：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">funWithReturn</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The function is to get the sum of two numbers..."</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"Input first number: "</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"Input another number: "</span></span><br><span class="line">    <span class="built_in">read</span> anotherNum</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The two numbers are <span class="variable">$aNum</span> and <span class="variable">$anotherNum</span> !"</span></span><br><span class="line">    <span class="built_in">return</span> $((<span class="variable">$aNum</span>+<span class="variable">$anotherNum</span>))</span><br><span class="line">&#125;</span><br><span class="line">funWithReturn</span><br><span class="line"><span class="comment"># Capture value returnd by last command</span></span><br><span class="line">ret=$?</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The sum of two numbers is <span class="variable">$ret</span> !"</span></span><br></pre></td></tr></table></figure></p>
<p>result:</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">The function <span class="keyword">is</span> <span class="keyword">to</span> <span class="keyword">get</span> <span class="keyword">the</span> sum <span class="keyword">of</span> two numbers...</span><br><span class="line">Input <span class="keyword">first</span> <span class="type">number</span>: <span class="number">25</span></span><br><span class="line">Input another <span class="type">number</span>: <span class="number">50</span></span><br><span class="line">The two numbers are <span class="number">25</span> <span class="keyword">and</span> <span class="number">50</span> !</span><br><span class="line">The sum <span class="keyword">of</span> two numbers <span class="keyword">is</span> <span class="number">75</span> !</span><br></pre></td></tr></table></figure>
<p>函数返回值在调用该函数后通过 $? 来获得。</p>
<p>再来看一个函数嵌套的例子：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Calling one function from another</span></span><br><span class="line"><span class="function"><span class="title">number_one</span></span> () &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"Url_1 is http://see.xidian.edu.cn/cpp/shell/"</span></span><br><span class="line">   number_two</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">number_two</span></span> () &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"Url_2 is http://see.xidian.edu.cn/cpp/u/xitong/"</span></span><br><span class="line">&#125;</span><br><span class="line">number_one</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">Url_1 <span class="keyword">is</span> http:<span class="comment">//see.xidian.edu.cn/cpp/shell/</span></span><br><span class="line">Url_2 <span class="keyword">is</span> http:<span class="comment">//see.xidian.edu.cn/cpp/u/xitong/</span></span><br></pre></td></tr></table></figure>
<p>像删除变量一样，删除函数也可以使用 unset 命令，不过要加上 .f 选项，如下所示：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$unset</span> .f function_name</span><br></pre></td></tr></table></figure>
<h4 id="函数参数">函数参数</h4><p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数…</p>
<p>带参数的函数示例：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">funWithParam</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of the first parameter is <span class="variable">$1</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of the second parameter is <span class="variable">$2</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of the tenth parameter is <span class="variable">$10</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of the tenth parameter is <span class="variable">$&#123;10&#125;</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of the eleventh parameter is <span class="variable">$&#123;11&#125;</span> !"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The amount of the parameters is <span class="variable">$#</span> !"</span>  <span class="comment"># 参数个数</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The string of the parameters is $* !"</span>  <span class="comment"># 传递给函数的所有参数</span></span><br><span class="line">&#125;</span><br><span class="line">funWithParam <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">34</span> <span class="number">73</span></span><br></pre></td></tr></table></figure>
<p>result:</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">The <span class="built_in">value</span> <span class="operator">of</span> <span class="operator">the</span> <span class="keyword">first</span> parameter is <span class="number">1</span> !</span><br><span class="line">The <span class="built_in">value</span> <span class="operator">of</span> <span class="operator">the</span> <span class="keyword">second</span> parameter is <span class="number">2</span> !</span><br><span class="line">The <span class="built_in">value</span> <span class="operator">of</span> <span class="operator">the</span> <span class="keyword">tenth</span> parameter is <span class="number">10</span> !</span><br><span class="line">The <span class="built_in">value</span> <span class="operator">of</span> <span class="operator">the</span> <span class="keyword">tenth</span> parameter is <span class="number">34</span> !</span><br><span class="line">The <span class="built_in">value</span> <span class="operator">of</span> <span class="operator">the</span> eleventh parameter is <span class="number">73</span> !</span><br><span class="line">The amount <span class="operator">of</span> <span class="operator">the</span> parameters is <span class="number">12</span> !</span><br><span class="line">The <span class="keyword">string</span> <span class="operator">of</span> <span class="operator">the</span> parameters is <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">34</span> <span class="number">73</span> !<span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>注意，$10 不能获取第十个参数，获取第十个参数需要${10}。当n&gt;=10时，需要使用${n}来获取参数。</p>
<table>
<thead>
<tr>
<th>特殊变量</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$#</td>
<td>传递给函数的参数个数。</td>
</tr>
<tr>
<td>$*</td>
<td>显示所有传递给函数的参数。</td>
</tr>
<tr>
<td>$@</td>
<td>与$*相同，但是略有区别，请查看Shell特殊变量。</td>
</tr>
<tr>
<td>$?</td>
<td>函数的返回值。</td>
</tr>
</tbody>
</table>
<h4 id="输出重定向">输出重定向</h4><p>命令的输出不仅可以是显示器，还可以很容易的转移向到文件，这被称为输出重定向。</p>
<p>命令输出重定向的语法为：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">$ <span class="command"><span class="keyword">command</span> &gt; <span class="title">file</span></span></span><br></pre></td></tr></table></figure>
<p>这样，输出到显示器的内容就可以被重定向到文件。</p>
<p>例如，下面的命令在显示器上不会看到任何输出：</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>who &gt; users</span><br></pre></td></tr></table></figure>
<p>打开 users 文件，可以看到下面的内容：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">$ cat users</span><br><span class="line">oko         tty01   Sep <span class="number">12</span> <span class="number">07</span>:<span class="number">30</span></span><br><span class="line">ai          tty15   Sep <span class="number">12</span> <span class="number">13</span>:<span class="number">32</span></span><br><span class="line">ruth        tty21   Sep <span class="number">12</span> <span class="number">10</span>:<span class="number">10</span></span><br><span class="line">pat         tty24   Sep <span class="number">12</span> <span class="number">13</span>:<span class="number">07</span></span><br><span class="line">steve       tty25   Sep <span class="number">12</span> <span class="number">13</span>:<span class="number">03</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>输出重定向会覆盖文件内容，请看下面的例子：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">echo</span> <span class="built_in">line</span> <span class="number">1</span> &gt; users</span><br><span class="line">$ <span class="keyword">cat</span> users</span><br><span class="line"><span class="built_in">line</span> <span class="number">1</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>如果不希望文件内容被覆盖，可以使用 &gt;&gt; 追加到文件末尾，例如：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">echo</span> <span class="built_in">line</span> <span class="number">2</span> &gt;&gt; users</span><br><span class="line">$ <span class="keyword">cat</span> users</span><br><span class="line"><span class="built_in">line</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">line</span> <span class="number">2</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h4 id="输入重定向">输入重定向</h4><p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line"><span class="command"><span class="keyword">command</span> &lt; <span class="title">file</span></span></span><br></pre></td></tr></table></figure>
<p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p>
<p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p>
<p>例如，计算 users 文件中的行数，可以使用下面的命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wc <span class="operator">-l</span> users</span><br><span class="line"><span class="number">2</span> users</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>也可以将输入重定向到 users 文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wc <span class="operator">-l</span> &lt; users</span><br><span class="line"><span class="number">2</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p>
<h4 id="重定向深入讲解">重定向深入讲解</h4><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$command</span> <span class="number">2</span> &gt; file</span><br></pre></td></tr></table></figure>
<p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$command</span> <span class="number">2</span> &gt;&gt; file</span><br></pre></td></tr></table></figure>
<p>2 表示标准错误文件(stderr)。</p>
<p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$command</span> &gt; file <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$command</span> &gt;&gt; file <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$command</span> &lt; file1 &gt;file2</span><br></pre></td></tr></table></figure>
<p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。 </p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>command &gt; file</td>
<td>将输出重定向到 file。</td>
</tr>
<tr>
<td>command &lt; file</td>
<td>将输入重定向到 file。</td>
</tr>
<tr>
<td>command &gt;&gt; file</td>
<td>将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt; file</td>
<td>将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&gt; file</td>
<td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&amp; m</td>
<td>将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td>n &lt;&amp; m</td>
<td>将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td>&lt;&lt; tag</td>
<td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<h4 id="Here_Document">Here Document</h4><p>Here Document 目前没有统一的翻译，这里暂译为”嵌入文档“。Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line"><span class="command"><span class="keyword">command</span> &lt;&lt; <span class="title">delimiter</span></span></span><br><span class="line">    document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure>
<p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p>
<p>注意：</p>
<ul>
<li>结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的delimiter前后的空格会被忽略掉。</li>
</ul>
<p>下面的例子，通过 wc -l 命令计算 document 的行数：</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$wc</span> -l &lt;&lt; EOF</span><br><span class="line">    This is a simple lookup program</span><br><span class="line">    <span class="keyword">for</span> good (and bad) restaurants</span><br><span class="line">    <span class="keyword">in</span> Cape Town.</span><br><span class="line">EOF</span><br><span class="line"><span class="number">3</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>也可以 将 Here Document 用在脚本中，例如：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line">cat &lt;&lt; EOF</span><br><span class="line">This is a simple lookup program</span><br><span class="line"><span class="keyword">for</span> good (and bad) restaurants</span><br><span class="line"><span class="keyword">in</span> Cape Town.</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">This <span class="keyword">is</span> a simple lookup program</span><br><span class="line"><span class="keyword">for</span> good (<span class="keyword">and</span> bad) restaurants</span><br><span class="line"><span class="keyword">in</span> Cape Town.</span><br></pre></td></tr></table></figure>
<p>下面的脚本通过 vi 编辑器将 document 保存到 test.txt 文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line">filename=test.txt</span><br><span class="line">vi <span class="variable">$filename</span> &lt;&lt;EndOfCommands</span><br><span class="line">i</span><br><span class="line">This file was created automatically from</span><br><span class="line">a shell script</span><br><span class="line">^[</span><br><span class="line">ZZ</span><br><span class="line">EndOfCommands</span><br></pre></td></tr></table></figure>
<p>运行脚本：</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">sh</span> <span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">Vim: Warning: <span class="keyword">Input</span> is not from a terminal</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>打开 test.txt，可以看到下面的内容：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">$ cat test.txt</span><br><span class="line">This <span class="built_in">file</span> was created automatically <span class="built_in">from</span></span><br><span class="line"><span class="operator">a</span> <span class="built_in">shell</span> script</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h4 id="/dev/null_文件">/dev/null 文件</h4><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>command &gt; <span class="regexp">/dev/null</span></span><br></pre></td></tr></table></figure>
<p>/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到”禁止输出“的效果。</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">$ command &gt; /dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="文件包含">文件包含</h4><p>像其他语言一样，Shell 也可以包含外部脚本，将外部脚本的内容合并到当前脚本。</p>
<p>Shell 中包含脚本可以使用：</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="bullet">. </span>filename</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="keyword">filename</span></span><br></pre></td></tr></table></figure>
<p>两种方式的效果相同，简单起见，一般使用点号(.)，但是注意点号(.)和文件名中间有一空格。</p>
<p>例如，创建两个脚本，一个是被调用脚本 subscript.sh，内容如下：</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="setting">url=<span class="value"><span class="string">"http://see.xidian.edu.cn/cpp/view/2738.html"</span></span></span></span><br></pre></td></tr></table></figure>
<p>一个是主文件 main.sh，内容如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line">. ./subscript.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$url</span></span><br></pre></td></tr></table></figure>
<p>执行脚本：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="variable">$chomd</span> +x main<span class="class">.sh</span></span><br><span class="line">./main<span class="class">.sh</span></span><br><span class="line">http:<span class="comment">//see.xidian.edu.cn/cpp/view/2738.html</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>注意：被包含脚本不需要有执行权限。</p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Shell/" rel="tag">#Shell</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/21/Shell简介/" rel="next" title="Shell简介">
                <i class="fa fa-chevron-left"></i> Shell简介
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/11/21/jmock/" rel="prev" title="jmock">
                jmock <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2015/11/21/Shell脚本/"
     data-title="Shell脚本"
     data-content=""
     data-url="http://gcblog.cn/2015/11/21/Shell脚本/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/11/21/Shell脚本/"
           data-title="Shell脚本" data-url="http://gcblog.cn/2015/11/21/Shell脚本/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Gc" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Gc</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">33</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">14</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chrisgong" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1916380757" target="_blank">
                  
                    <i class="fa fa-globe"></i> weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#“#!”"><span class="nav-number">1.</span> <span class="nav-text">“#!”</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#echo"><span class="nav-number">2.</span> <span class="nav-text">echo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#read"><span class="nav-number">3.</span> <span class="nav-text">read</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定义变量"><span class="nav-number">4.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用变量"><span class="nav-number">5.</span> <span class="nav-text">使用变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重新定义变量"><span class="nav-number">6.</span> <span class="nav-text">重新定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#只读变量"><span class="nav-number">7.</span> <span class="nav-text">只读变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除变量"><span class="nav-number">8.</span> <span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量类型"><span class="nav-number">9.</span> <span class="nav-text">变量类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#特殊变量"><span class="nav-number">10.</span> <span class="nav-text">特殊变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#命令行参数"><span class="nav-number">11.</span> <span class="nav-text">命令行参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#$*_和_$@_的区别"><span class="nav-number">12.</span> <span class="nav-text">$* 和 $@ 的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#退出状态"><span class="nav-number">13.</span> <span class="nav-text">退出状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#转义字符"><span class="nav-number">14.</span> <span class="nav-text">转义字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#命令替换"><span class="nav-number">15.</span> <span class="nav-text">命令替换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量替换"><span class="nav-number">16.</span> <span class="nav-text">变量替换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#算术运算符"><span class="nav-number">17.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关系运算符"><span class="nav-number">18.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#布尔运算符"><span class="nav-number">19.</span> <span class="nav-text">布尔运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串运算符"><span class="nav-number">20.</span> <span class="nav-text">字符串运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件测试运算符"><span class="nav-number">21.</span> <span class="nav-text">文件测试运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell注释"><span class="nav-number">22.</span> <span class="nav-text">Shell注释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell字符串"><span class="nav-number">23.</span> <span class="nav-text">Shell字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定义数组"><span class="nav-number">24.</span> <span class="nav-text">定义数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#读取数组"><span class="nav-number">25.</span> <span class="nav-text">读取数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取数组的长度"><span class="nav-number">26.</span> <span class="nav-text">获取数组的长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#printf命令"><span class="nav-number">27.</span> <span class="nav-text">printf命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#if_else语句"><span class="nav-number">28.</span> <span class="nav-text">if else语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case_esac语句"><span class="nav-number">29.</span> <span class="nav-text">case esac语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环"><span class="nav-number">30.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环"><span class="nav-number">31.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until循环"><span class="nav-number">32.</span> <span class="nav-text">until循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#break和continue命令"><span class="nav-number">33.</span> <span class="nav-text">break和continue命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell函数返回值、删除函数、在终端调用函数"><span class="nav-number">34.</span> <span class="nav-text">Shell函数返回值、删除函数、在终端调用函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数参数"><span class="nav-number">35.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出重定向"><span class="nav-number">36.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输入重定向"><span class="nav-number">37.</span> <span class="nav-text">输入重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重定向深入讲解"><span class="nav-number">38.</span> <span class="nav-text">重定向深入讲解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Here_Document"><span class="nav-number">39.</span> <span class="nav-text">Here Document</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#/dev/null_文件"><span class="nav-number">40.</span> <span class="nav-text">/dev/null 文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件包含"><span class="nav-number">41.</span> <span class="nav-text">文件包含</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gc</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"gcblog"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
